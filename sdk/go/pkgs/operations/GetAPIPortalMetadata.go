// WARNING: This file was generated by PrimeCodeGen. DO NOT EDIT.

package operations

import (
	"context"
	"net/http"

	"github.com/go-resty/resty/v2"
	"github.com/primelib/primecodegen-lib-go/requeststruct"
	"github.com/primelib/webmethods-api-gateway-client/sdk/go/pkgs/models"
)

type GetAPIPortalMetadataRequest struct {
	PortalGatewayId *string `queryParam:"style=simple,explode=false,name=portalGatewayId"` // Id of the API Portal configuration for retrieval of the community information
	APIId           *string `queryParam:"style=simple,explode=false,name=apiId"`           // Id of the API published from API Gateway to API Portal
}

type GetAPIPortalMetadataResponse struct {
	// Success response
	Result *models.AdminPortalGatewayCommunitiesData
	// Error response
	// HTTP response status code for this operation
	StatusCode int
	// Raw HTTP response; suitable for custom response parsing
	RawResponse *http.Response
}

// GetAPIPortalMetadata This API allows you to retrieve the details about communities in API Portal. An API can be published from API Gateway to any of the communities available in API Portal
//
//meta:operation GET /portalGateways/communities
func GetAPIPortalMetadata(client *resty.Client, ctx context.Context, req GetAPIPortalMetadataRequest) (*GetAPIPortalMetadataResponse, error) {
	r := client.R().SetContext(ctx)

	// process request parameters
	reqData, err := requeststruct.ResolveRequestParams(req)
	if err != nil {
		return nil, err
	}
	r.SetHeader("Accept", "application/json")
	r.SetHeaders(reqData.HeaderParams)
	r.SetPathParams(reqData.PathParams)
	r.SetQueryParamsFromValues(reqData.QueryParams)
	if reqData.BodyParam != nil {
		r.SetBody(reqData.BodyParam)
	}
	result := new(models.AdminPortalGatewayCommunitiesData)
	r.SetResult(result)

	// send the request
	resp, err := r.Get("/portalGateways/communities")
	if err != nil {
		return nil, err
	}

	return &GetAPIPortalMetadataResponse{
		StatusCode:  resp.StatusCode(),
		RawResponse: resp.RawResponse,
		Result:      result,
	}, nil
}
