// WARNING: This file was generated by PrimeCodeGen. DO NOT EDIT.

package operations

import (
	"context"
	"net/http"

	"github.com/go-resty/resty/v2"
	"github.com/primelib/primecodegen-lib-go/requeststruct"
	"github.com/primelib/webmethods-api-gateway-client/sdk/go/pkgs/models"
)

type GetPolicyStagesRequest struct {
}

type GetPolicyStagesResponse struct {
	// Success response
	Result []*models.PolicyMgmtPolicyEnforcementStage
	// Error response
	// HTTP response status code for this operation
	StatusCode int
	// Raw HTTP response; suitable for custom response parsing
	RawResponse *http.Response
}

// GetPolicyStages This REST Request is used to get the list of policy stages available in API gateway. It will also show the list of policies (template key of each policy) associated with each stage.
//
//meta:operation GET /policyStages
func GetPolicyStages(client *resty.Client, ctx context.Context, req GetPolicyStagesRequest) (*GetPolicyStagesResponse, error) {
	r := client.R().SetContext(ctx)

	// process request parameters
	reqData, err := requeststruct.ResolveRequestParams(req)
	if err != nil {
		return nil, err
	}
	r.SetHeader("Accept", "application/json")
	r.SetHeaders(reqData.HeaderParams)
	r.SetPathParams(reqData.PathParams)
	r.SetQueryParamsFromValues(reqData.QueryParams)
	if reqData.BodyParam != nil {
		r.SetBody(reqData.BodyParam)
	}
	var result []*models.PolicyMgmtPolicyEnforcementStage
	r.SetResult(result)

	// send the request
	resp, err := r.Get("/policyStages")
	if err != nil {
		return nil, err
	}

	return &GetPolicyStagesResponse{
		StatusCode:  resp.StatusCode(),
		RawResponse: resp.RawResponse,
	}, nil
}
