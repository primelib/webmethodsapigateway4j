// WARNING: This file was generated by PrimeCodeGen. DO NOT EDIT.

package operations

import (
	"context"
	"net/http"

	"github.com/go-resty/resty/v2"
	"github.com/primelib/primecodegen-lib-go/requeststruct"
	"github.com/primelib/webmethods-api-gateway-client/sdk/go/pkgs/models"
)

type GetAllPlansRequest struct {
}

type GetAllPlansResponse struct {
	// Success response
	Result *models.MonetizationPlanGetAllResponse
	// Error response
	// HTTP response status code for this operation
	StatusCode int
	// Raw HTTP response; suitable for custom response parsing
	RawResponse *http.Response
}

// GetAllPlans This REST request is used to retrieve list of all plans from API Gateway along with its rate limit and quota as policies. Also it will list down the associated packageIds for each plan in the response. You can use /policies/{policyId} to retrieve the rate limit and quota policy details and /packages/{packageId} to retrieve the package details
//
//meta:operation GET /plans
func GetAllPlans(client *resty.Client, ctx context.Context, req GetAllPlansRequest) (*GetAllPlansResponse, error) {
	r := client.R().SetContext(ctx)

	// process request parameters
	reqData, err := requeststruct.ResolveRequestParams(req)
	if err != nil {
		return nil, err
	}
	r.SetHeader("Accept", "application/json")
	r.SetHeaders(reqData.HeaderParams)
	r.SetPathParams(reqData.PathParams)
	r.SetQueryParamsFromValues(reqData.QueryParams)
	if reqData.BodyParam != nil {
		r.SetBody(reqData.BodyParam)
	}
	result := new(models.MonetizationPlanGetAllResponse)
	r.SetResult(result)

	// send the request
	resp, err := r.Get("/plans")
	if err != nil {
		return nil, err
	}

	return &GetAllPlansResponse{
		StatusCode:  resp.StatusCode(),
		RawResponse: resp.RawResponse,
		Result:      result,
	}, nil
}
